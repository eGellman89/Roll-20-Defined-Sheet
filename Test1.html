<!--
Roll Template
-->
<rolltemplate class="sheet-rolltemplate-custom">
 <div class="sheet-container sheet-color-{{color}}">
  <div class="sheet-header">
   {{#title}}
   <div class="sheet-title">{{title}}</div>
   {{/title}}
   {{#subtitle}}
   <div class="sheet-subtitle">{{subtitle}}</div>
   {{/subtitle}}
  </div>
  <div class="sheet-content">
   {{#allprops() title subtitle desc color}}
   <div class="sheet-key">{{key}}</div>
   <div class="sheet-value">{{value}}</div>
   {{/allprops() title subtitle desc color}}
   {{#desc}}
   <div class="sheet-desc">{{desc}}</div>
   {{/desc}}
  </div>
 </div>
</rolltemplate>
<!--
Below is the sheet's selector buttons
-->
<input type="hidden" class="sheet-tabstoggle" name="attr_sheetTab"  value="main"/>
<div class="SAbutton">
 <button type="action" name="act_main">Main</button>
 <button type="action" name="act_definitions">Definitions & Traits</button>
 <button type="action" name="act_skills">Skills</button>
 <button type="action" name="act_gear">Gear</button>
</div>
<!--
This is the Main Tab of the sheet
-->
<div class="sheet-main">
 <input type="hidden" name="NLD_max"/>
 <div class="clearfix characterdetailblock">
  <div class="titleblock">
   Character Information
  </div>
  <div class="DataBox">
   Name: <input type="text" name="attr_charname"/>
  </div>
  <div class="DataBox">
   Species: <input type="text" name="attr_species"/>
  </div>
  <div class="DataBox">
   Hit Dice: <input type="number" name="attr_HD"/>
  </div>
  <div class="DataBox">
   Level Gap: <input type="number" name="attr_LG"/>
  </div>
  <div class="DataBox">
   Size: <select type="text" name="attr_size" id="SizeCategory">
           <option value="Sub Tiny">Sub Tiny</option>
           <option value="Tiny">Tiny</option>
           <option value="Very Small">Very Small</option>
           <option value="Small">Small</option>
           <option selected="selected" value="Medium">Medium</option>
           <option value="Large">Large</option>
           <option value="Very Large">Very Large</option>
           <option value="Gargantuan">Gargantuan</option>
           <option value="Super Gargantuan">Super Gargantuan</option>
          </select>
  </div>
  <div class="characterdetailblock">
   <div class="DataBox">
    Player: <input type="text"/>
   </div>
   <div class="DataBox">
    Religion: <input type="text"/>
   </div>
   <div class="DataBox">
    Sanctity: <input type="text"/>
   </div>
   <div class="DataBox">
    HDE: <input type="number" name="attr_HDE" readonly="true"/>
   </div>
  </div>
 </div>
 <div class="leftsidestatblock clearfix">
  <div>
   <table class="textright">
    <tr>
     <th>Attribute</th>
     <th>Enhance</th>
     <th>Bonus</th>
     <th>Penalty</th>
     <th>Total</th>
     <th>Modifier</th>
     <th></th>
    </tr>
    <tr>
     <td class="Attribute-Name">
      <strong>Strength</strong>: <input type="number" name="attr_strength"/>
     </td>
     <td class="BonusBox">
      <input type="number" name="attr_StrEnch"/>
     </td>
     <td class="BonusBox">
      <input type="number" name="attr_StrBonus"/>
     </td>
     <td class="BonusBox">
      <input type="number" name="attr_StrPen"/>
     </td>
     <td class="Attribute-Mod">
         <input type="number" name="attr_StrTotal" readonly="true"/>
     </td>
     <td class="Attribute-Mod">
      <input type="number" name="attr_strmod" readonly="true"/>
     </td>
     <td>
      <button title="Strength Check"
              type="roll"
              value="&{template:custom}{{title=Strength Check}}{{subtitle=@{Charname}}}{{Result:= [[1d20+@{strmod}]]}}"
              name="roll_Strength-Check"></button>
     </td>
    </tr>
    <tr>
     <td class="Attribute-Name">
      <strong>Dexterity</strong>: <input type="number" name="attr_dexterity"/>
     </td>
     <td class="BonusBox">
      <input type="number" name="attr_DexEnch"/>
     </td>
     <td class="BonusBox">
      <input type="number" name="attr_DexBonus"/>
     </td>
     <td class="BonusBox">
      <input type="number" name="attr_DexPen"/>
     </td>
     <td class="Attribute-Mod">
     <input type="number" name="attr_DexTotal" readonly="true"/>
     </td>
     <td class="Attribute-Mod">
      <input type="number" name="attr_dexmod" readonly="true"/>
     </td>
     <td>
      <button title="Dexterity Check"
              type="roll"
              value="&{template:custom}{{title=Dexterity Check}}{{subtitle=@{Charname}}}{{Result:= [[1d20+@{dexmod}]]}}"
              name="roll_Dexterity-check"></button>
     </td>
    </tr>
    <tr>
     <td class="Attribute-Name">
      <strong>Constitution</strong>: <input type="number" name="attr_constitution"/>
     </td>
     <td class="BonusBox">
      <input type="number" name="attr_ConEnch"/>
     </td>
     <td class="BonusBox">
      <input type="number" name="attr_ConBonus"/>
     </td>
     <td class="BonusBox">
      <input type="number" name="attr_ConPen"/>
     </td>
     <td class="Attribute-Mod">
      <input type="number" name="attr_ConTotal" readonly="true"/>
     </td>
     <td class="Attribute-Mod">
      <input type="number" name="attr_conmod" readonly="true"/>
     </td>
     <td>
      <button title="Constitution Check"
              type="roll"
              value="&{template:custom}{{title=Constitution Check}}{{subtitle=@{Charname}}}{{Result:= [[1d20+@{conmod}]]}}"
              name="roll_Constitution-check"></button>
     </td>
    </tr>
    <tr>
     <td class="Attribute-Name">
      <strong>Wisdom</strong>: <input type="number" name="attr_wisdom"/>
     </td>
     <td class="BonusBox">
      <input type="number" name="attr_WisEnch"/>
     </td>
     <td class="BonusBox">
      <input type="number" name="attr_WisBonus"/>
     </td>
     <td class="BonusBox">
      <input type="number" name="attr_WisPen"/>
     </td>
     <td class="Attribute-Mod">
      <input type="number" name="attr_WisTotal" readonly="true"/>
     </td>
     <td class="Attribute-Mod">
      <input type="number" name="attr_wismod" readonly="true"/>
     </td>
     <td>
      <button title="Wisdom Check"
              type="roll"
              value="&{template:custom}{{title=Wisdom Check}}{{subtitle=@{Charname}}}{{Result:= [[1d20+@{wismod}]]}}"
              name="roll_Wisdom-check"></button>
     </td>
    </tr>
    <tr>
     <td class="Attribute-Name">
      <strong>Intelligence</strong>: <input type="number" name="attr_intelligence"/>
     </td>
     <td class="BonusBox">
      <input type="number" name="attr_IntEnch"/>
     </td>
     <td class="BonusBox">
      <input type="number" name="attr_IntBonus"/>
     </td>
     <td class="BonusBox">
      <input type="number" name="attr_IntPen"/>
     </td>
     <td class="Attribute-Mod">
      <input type="number" name="attr_IntTotal" readonly="true"/>
     </td>
     <td class="Attribute-Mod">
      <input type="number" name="attr_intmod" readonly="true"/>
     </td>
     <td>
      <button title="Intelligence Check"
              type="roll"
              value="&{template:custom}{{title=Intelligence Check}}{{subtitle=@{Charname}}}{{Result:= [[1d20+@{intmod}]]}}"
              name="roll_Intelligence-check"></button>
     </td>
    </tr>
    <tr>
     <td class="Attribute-Name">
      <strong>Charisma</strong>: <input type="number" name="attr_charisma"/>
     </td>
     <td class="BonusBox">
      <input type="number" name="attr_ChaEnch"/>
     </td>
     <td class="BonusBox">
      <input type="number" name="attr_ChaBonus"/>
     </td>
     <td class="BonusBox">
      <input type="number" name="attr_ChaPen"/>
     </td>
     <td class="Attribute-Mod">
      <input type="number" name="attr_ChaTotal" readonly="true"/>
     </td>
     <td class="Attribute-Mod">
      <input type="number" name="attr_chamod" readonly="true"/>
     </td>
     <td>
      <button title="Charisma Check"
              type="roll"
              value="&{template:custom}{{title=Charisma Check}}{{subtitle=@{Charname}}}{{Result:= [[1d20+@{chamod}]]}}"
              name="roll_Charisma-check"></button>
     </td>
    </tr>
   </table>
  </div>
  <hr>
  <div class="Save-Selection">
   <table>
    <tr>
     <th>Fortitude</th>
     <th>Reflex</th>
     <th>Will</th>
    </tr>
    <tr>
     <td>
      <select type="text" name="attr_FortBaseStr" id="FortBase">
       <option value="Low">Low</option>
       <option value="High">High</option>
      </select>
     </td>
     <td>
      <select type="text" name="attr_RefBaseStr" id="ReflexBase">
       <option value="Low">Low</option>
       <option value="High">High</option>
      </select>
     </td>
     <td>
      <select type="text" name="attr_WilBaseStr" id="WillBase">
       <option value="Low">Low</option>
       <option value="High">High</option>
      </select>
     </td>
    </tr>
   </table>
  </div>
  <div class="clearfix">
   <div class="title">
    Saving Throws
   </div>
   <div class="saves">
    <div>Fortitude: <input type="number" readonly name="attr_FortTotal"/></div>
    <div>Base: <input type="number" name="attr_FortBaseNum" readonly="true"/></div>
    <div>Con: <input type="number" name="attr_conmod" readonly="true"/></div>
    <div>Magic: <input type="number" name="attr_FortMagic"/></div>
    <div>Misc: <input type="number" name="attr_FortMiscNum"/></div>
    <div><button title="Fortitude Save"
            type="roll"
            value="&{template:custom}{{title=Fortitude Save}}{{subtitle=@{Charname}}}{{Result:= [[1d20+@{FortTotal}]]}}"
            name="roll_Fortitude-save"></button></div>
    <div>Reflex: <input type="number" readonly name="attr_RefTotal"/></div>
    <div>Base: <input type="number" name="attr_RefBaseNum" readonly="true"/></div>
    <div>Dex: <input type="number" name="attr_dexmod" readonly="true"/></div>
    <div>Magic: <input type="number" name="attr_RefMagic"/></div>
    <div>Misc: <input type="number" name="attr_RefMiscNum"/></div>
    <div><button title="Reflex Save"
                 type="roll"
                 value="&{template:custom}{{title=Reflex Save}}{{subtitle=@{Charname}}}{{Result:= [[1d20+@{RefTotal}]]}}"
                 name="roll_Reflex-save"></button></div>
    <div>Will: <input type="number" readonly name="attr_WilTotal"/></div>
    <div>Base: <input type="number" name="attr_WilBaseNum" readonly="true"/></div>
    <div>Wis: <input type="number" name="attr_wismod" readonly="true"/></div>
    <div>Magic: <input type="number" name="attr_WilMagic"/></div>
    <div>Misc: <input type="number" name="attr_WilMiscNum"/></div>
    <div><button title="Will Save"
                 type="roll"
                 value="&{template:custom}{{title=Will Save}}{{subtitle=@{Charname}}}{{Result:= [[1d20+@{WilTotal}]]}}"
                 name="roll_Will-save"></button></div>
   </div>
  </div>
 </div>
 <div class="clearfix rightsideblock">
  <table>
   <tr>
    <th>Hit Points</th>
    <th>Armor Class</th>
   </tr>
   <tr>
    <td>Current HP: <input type="number" name="attr_hp"/></td>
    <td style="border-right: 1px black solid">Total AC: <input type="number" readonly="true" name="attr_TotalAC"/></td>
   </tr>
   <tr>
    <td>Max HP:<input type="number" readonly="true" name="attr_hp_max"/></td>
    <td style="border-right: 1px black solid">Touch AC: <input type="number" readonly="true" name="attr_TouchAC"/></td>
   </tr>
   <tr>
    <td>Constitution HP:<input type="number" readonly="true" name="attr_ConHP"/></td>
    <td style="border-right: 1px black solid;border-bottom: 1px solid white">
     Flat-Footed AC:<input type="number" readonly="true" name="attr_FlatFAC"/>
    </td>
   </tr>
   <tr>
    <td>Progression HP:<input type="number" readonly="true" name="attr_ProgHP"/></td>
    <td style="border-right: 1px black solid">Armor: <input type="number" readonly="true" name="attr_ArmorBonus"/></td>
   </tr>
   <tr>
    <td>Misc. HP:<input type="number" name="attr_MiscHP"/></td>
    <td style="border-right: 1px black solid">Shield: <input type="number" readonly="true" name="attr_Shield"/></td>
   </tr>
   <tr>
    <td>Rolled HP:<input type="number" name="attr_RollHP"/></td>
    <td style="border-right: 1px black solid">Natural:<input type="number" name="attr_NaturalAC"></td>
   </tr>
   <tr>
    <th style="border-right: white solid 1px; border-top: white solid 1px">Initiative</th>
    <td style="border-right: 1px black solid">Deflection: <input type="number" name="attr_Deflection"/></td>
   </tr>
   <tr>
    <td>
     Initiative Total:
     <input type="number" readonly="true" name="attr_InitTotal"/>
     <button class="button"
             title="Initiative"
             type="roll"
             value="&{template:custom}{{title=Initiative}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{InitTotal}+(@{InitTotal}/100)&{tracker}]]}}"
             name="roll_Intelligence-check"></button>
    </td>
    <td style="border-right: 1px black solid">Parry: <input type="number" name="attr_ParryAC"/></td>
   </tr>
   <tr>
    <td>Dex Modifier:<input type="number" readonly="true" name="attr_dexmod"/></td>
    <td>Dodge: <input type="number" name="attr_DodgeAC"/></td>
   </tr>
   <tr>
    <td>Initiative Bonus: <input type="number" name="attr_InitBonus"/></td>
    <td>Insight: <input type="number" name="attr_InsightAC"/></td>
   </tr>
   <tr>
    <td></td>
    <td>Misc. <input type="number" name="attr_MiscAC"/></td>
   </tr>
  </table>
 </div>
 </div>
<!--<editor-fold desc="Skill-Sheet">-->
<div class="sheet-skills">
 <div class="SkillsPage">
  <table>
   <tr>
    <th colspan="9">Skills</th>
   </tr>
   <tr class="skill-desc">
    <td>Trained?</td>
    <td>Skill Name</td>
    <td>Use Untrained?</td>
    <td>Key</td>
    <td>Roll</td>
    <td>Total</td>
    <td>Attribute</td>
    <td>Skill Points</td>
    <td>Misc.</td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_AcrobaticsTrained"/></td>
    <td>Acrobatics*</td>
    <td>Yes</td>
    <td>Str<input type="hidden" name="attr_KeyStr"/></td>
    <td><button class="button"
                title="Acrobatics"
                type="roll"
                value="&{template:custom}{{title=Acrobatics}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{AcrobaticsTotal}]]}}"
               name="roll_Acrobatics-check"></button></td>
    <td><input type="number" readonly name="attr_AcrobaticsTotal"/></td>
    <td><input type="number" readonly name="attr_strmod"/></td>
    <td><input type="number" name="attr_AcrobaticsSP"/></td>
    <td><input type="number" name="attr_AcrobaticsMisc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_BalanceTrained"/></td>
    <td>Balance</td>
    <td>Yes</td>
    <td>Dex<input type="hidden" name="attr_KeyDex"/></td>
    <td><button class="button"
                title="Balance"
                type="roll"
                value="&{template:custom}{{title=Balance}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{BalanceTotal}]]}}"
                name="roll_Balance-check"></button></td>
    <td><input type="number" readonly name="attr_BalanceTotal"/></td>
    <td><input type="number" readonly name="attr_dexmod"/></td>
    <td><input type="number" name="attr_BalanceSP"/></td>
    <td><input type="number" name="attr_BalanceMisc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_BeguileTrained"/></td>
    <td>Beguile</td>
    <td>Yes</td>
    <td>Cha<input type="hidden" name="attr_KeyCha"/></td>
    <td><button class="button"
                title="Beguile"
                type="roll"
                value="&{template:custom}{{title=Beguile}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{BeguileTotal}]]}}"
                name="roll_Beguile-check"></button></td>
    <td><input type="number" readonly name="attr_BeguileTotal"/></td>
    <td><input type="number" readonly name="attr_chamod"/></td>
    <td><input type="number" name="attr_BeguileSP"/></td>
    <td><input type="number" name="attr_BeguileMisc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_BushcraftTrained"/></td>
    <td>Bushcraft</td>
    <td>No</td>
    <td>Wis<input type="hidden" name="attr_KeyWis"/></td>
    <td><button class="button"
                title="Bushcraft"
                type="roll"
                value="&{template:custom}{{title=Bushcraft}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{BushcraftTotal}]]}}"
                name="roll_Bushcraft-check"></button></td>
    <td><input type="number" readonly name="attr_BushcraftTotal"/></td>
    <td><input type="number" readonly name="attr_wismod"/></td>
    <td><input type="number" name="attr_BushcraftSP"/></td>
    <td><input type="number" name="attr_BushcraftMisc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_ConcealTrained"/></td>
    <td>Conceal</td>
    <td>Yes</td>
    <td>Dex<input type="hidden" name="attr_KeyDex"/></td>
    <td><button class="button"
                title="Conceal"
                type="roll"
                value="&{template:custom}{{title=Conceal}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{ConcealTotal}]]}}"
                name="roll_Conceal-check"></button></td>
    <td><input type="number" readonly name="attr_ConcealTotal"/></td>
    <td><input type="number" readonly name="attr_dexmod"/></td>
    <td><input type="number" name="attr_ConcealSP"/></td>
    <td><input type="number" name="attr_ConcealMisc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_ConcentrationTrained"/></td>
    <td>Concentration</td>
    <td>Yes</td>
    <td>Con<input type="hidden" name="attr_KeyCon"/></td>
    <td><button class="button"
                title="Concentration"
                type="roll"
                value="&{template:custom}{{title=Concentration}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{ConcentrationTotal}]]}}"
                name="roll_Concentration-check"></button></td>
    <td><input type="number" readonly name="attr_ConcentrationTotal"/></td>
    <td><input type="number" readonly name="attr_conmod"/></td>
    <td><input type="number" name="attr_ConcentrationSP"/></td>
    <td><input type="number" name="attr_ConcentrationMisc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_CounterfeitTrained"/></td>
    <td>Counterfeit</td>
    <td>No</td>
    <td>Int<input type="hidden" name="attr_KeyInt"/></td>
    <td><button class="button"
                title="Counterfeit"
                type="roll"
                value="&{template:custom}{{title=Counterfeit}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{CounterfeitTotal}]]}}"
                name="roll_Counterfeit-check"></button></td>
    <td><input type="number" readonly name="attr_CounterfeitTotal"/></td>
    <td><input type="number" readonly name="attr_intmod"/></td>
    <td><input type="number" name="attr_CounterfeitSP"/></td>
    <td><input type="number" name="attr_CounterfeitMisc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_Craft1Trained"/></td>
    <td>Craft: <input type="text" name="attr_Craft1Name"/></td>
    <td>No</td>
    <td>Int<input type="hidden" name="attr_KeyInt"/></td>
    <td><button class="button"
                title="Craft1"
                type="roll"
                value="&{template:custom}{{title=Craft: @{Craft1Name}}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{Craft1Total}]]}}"
                name="roll_Craft1-check"></button></td>
    <td><input type="number" readonly name="attr_Craft1Total"/></td>
    <td><input type="number" readonly name="attr_intmod"/></td>
    <td><input type="number" name="attr_Craft1SP"/></td>
    <td><input type="number" name="attr_Craft1Misc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_Craft2Trained"/></td>
    <td>Craft: <input type="text" name="attr_Craft2Name"/></td>
    <td>No</td>
    <td>Int<input type="hidden" name="attr_KeyInt"/></td>
    <td><button class="button"
                title="Craft2"
                type="roll"
                value="&{template:custom}{{title=Craft: @{Craft2Name}}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{Craft2Total}]]}}"
                name="roll_Craft2-check"></button></td>
    <td><input type="number" readonly name="attr_Craft2Total"/></td>
    <td><input type="number" readonly name="attr_intmod"/></td>
    <td><input type="number" name="attr_Craft2SP"/></td>
    <td><input type="number" name="attr_Craft2Misc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_Craft3Trained"/></td>
    <td>Craft: <input type="text" name="attr_Craft3Name"/></td>
    <td>No</td>
    <td>Int<input type="hidden" name="attr_KeyInt"/></td>
    <td><button class="button"
                title="Craft3"
                type="roll"
                value="&{template:custom}{{title=Craft: @{Craft3Name}}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{Craft3Total}]]}}"
                name="roll_Craft3-check"></button></td>
    <td><input type="number" readonly name="attr_Craft3Total"/></td>
    <td><input type="number" readonly name="attr_intmod"/></td>
    <td><input type="number" name="attr_Craft3SP"/></td>
    <td><input type="number" name="attr_Craft3Misc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_DiscernIntentTrained"/></td>
    <td>Discern Intent</td>
    <td>Yes</td>
    <td>Wis<input type="hidden" name="attr_KeyWis"/></td>
    <td><button class="button"
                title="DiscernIntent"
                type="roll"
                value="&{template:custom}{{title=Discern Intent}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{DiscernIntentTotal}]]}}"
                name="roll_DiscernIntent-check"></button></td>
    <td><input type="number" readonly name="attr_DiscernIntentTotal"/></td>
    <td><input type="number" readonly name="attr_wismod"/></td>
    <td><input type="number" name="attr_DiscernIntentSP"/></td>
    <td><input type="number" name="attr_DiscernIntentMisc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_DiplomacyTrained"/></td>
    <td>Diplomacy</td>
    <td>Yes</td>
    <td>Cha<input type="hidden" name="attr_KeyCha"/></td>
    <td><button class="button"
                title="Diplomacy"
                type="roll"
                value="&{template:custom}{{title=Diplomacy}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{DiplomacyTotal}]]}}"
                name="roll_Diplomacy-check"></button></td>
    <td><input type="number" readonly name="attr_DiplomacyTotal"/></td>
    <td><input type="number" readonly name="attr_chamod"/></td>
    <td><input type="number" name="attr_DiplomacySP"/></td>
    <td><input type="number" name="attr_DiplomacyMisc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_DisguiseTrained"/></td>
    <td>Disguise</td>
    <td>Yes</td>
    <td>Cha<input type="hidden" name="attr_KeyCha"/></td>
    <td><button class="button"
                title="Disguise"
                type="roll"
                value="&{template:custom}{{title=Disguise}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{DisguiseTotal}]]}}"
                name="roll_Disguise-check"></button></td>
    <td><input type="number" readonly name="attr_DisguiseTotal"/></td>
    <td><input type="number" readonly name="attr_chamod"/></td>
    <td><input type="number" name="attr_DisguiseSP"/></td>
    <td><input type="number" name="attr_DisguiseMisc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_EscapeArtistTrained"/></td>
    <td>Escape Artist</td>
    <td>Yes</td>
    <td>Dex<input type="hidden" name="attr_KeyDex"/></td>
    <td><button class="button"
                title="Escape Artist"
                type="roll"
                value="&{template:custom}{{title=EscapeArtist}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{EscapeArtistTotal}]]}}"
                name="roll_EscapeArtist-check"></button></td>
    <td><input type="number" readonly name="attr_EscapeArtistTotal"/></td>
    <td><input type="number" readonly name="attr_dexmod"/></td>
    <td><input type="number" name="attr_EscapeArtistSP"/></td>
    <td><input type="number" name="attr_EscapeArtistMisc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_GatherInformationTrained"/></td>
    <td>Gather Information</td>
    <td>Yes</td>
    <td>Cha<input type="hidden" name="attr_KeyCha"/></td>
    <td><button class="button"
                title="Gather Information"
                type="roll"
                value="&{template:custom}{{title=GatherInformation}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{GatherInformationTotal}]]}}"
                name="roll_GatherInformation-check"></button></td>
    <td><input type="number" readonly name="attr_GatherInformationTotal"/></td>
    <td><input type="number" readonly name="attr_chamod"/></td>
    <td><input type="number" name="attr_GatherInformationSP"/></td>
    <td><input type="number" name="attr_GatherInformationMisc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_HaggleTrained"/></td>
    <td>Haggle</td>
    <td>Yes</td>
    <td>Cha<input type="hidden" name="attr_KeyCha"/></td>
    <td><button class="button"
                title="Haggle"
                type="roll"
                value="&{template:custom}{{title=Haggle}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{HaggleTotal}]]}}"
                name="roll_Haggle-check"></button></td>
    <td><input type="number" readonly name="attr_HaggleTotal"/></td>
    <td><input type="number" readonly name="attr_chamod"/></td>
    <td><input type="number" name="attr_HaggleSP"/></td>
    <td><input type="number" name="attr_HaggleMisc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_HealTrained"/></td>
    <td>Heal</td>
    <td>No</td>
    <td>Wis<input type="hidden" name="attr_KeyWis"/></td>
    <td><button class="button"
                title="Heal"
                type="roll"
                value="&{template:custom}{{title=Heal}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{HealTotal}]]}}"
                name="roll_Heal-check"></button></td>
    <td><input type="number" readonly name="attr_HealTotal"/></td>
    <td><input type="number" readonly name="attr_wismod"/></td>
    <td><input type="number" name="attr_HealSP"/></td>
    <td><input type="number" name="attr_HealMisc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_IntimidateTrained"/></td>
    <td>Intimidate</td>
    <td>Yes</td>
    <td>Cha<input type="hidden" name="attr_KeyCha"/></td>
    <td><button class="button"
                title="Intimidate"
                type="roll"
                value="&{template:custom}{{title=Intimidate}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{IntimidateTotal}]]}}"
                name="roll_Intimidate-check"></button></td>
    <td><input type="number" readonly name="attr_IntimidateTotal"/></td>
    <td><input type="number" readonly name="attr_chamod"/></td>
    <td><input type="number" name="attr_IntimidateSP"/></td>
    <td><input type="number" name="attr_IntimidateMisc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_InvestigateTrained"/></td>
    <td>Investigate</td>
    <td>Yes</td>
    <td>Int<input type="hidden" name="attr_KeyInt"/></td>
    <td><button class="button"
                title="Investigate"
                type="roll"
                value="&{template:custom}{{title=Investigate}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{InvestigateTotal}]]}}"
                name="roll_Investigate-check"></button></td>
    <td><input type="number" readonly name="attr_InvestigateTotal"/></td>
    <td><input type="number" readonly name="attr_intmod"/></td>
    <td><input type="number" name="attr_InvestigateSP"/></td>
    <td><input type="number" name="attr_InvestigateMisc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_Knowledge1Trained"/></td>
    <td>Knowledge <input type="text" name="attr_Knowledge1Name"/></td>
    <td>No</td>
    <td>Int<input type="hidden" name="attr_KeyInt"/></td>
    <td><button class="button"
                title="Knowledge1"
                type="roll"
                value="&{template:custom}{{title=Knowledge: @{Knowledge1Name}}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{Knowledge1Total}]]}}"
                name="roll_Knowledge1-check"></button></td>
    <td><input type="number" readonly name="attr_Knowledge1Total"/></td>
    <td><input type="number" readonly name="attr_intmod"/></td>
    <td><input type="number" name="attr_Knowledge1SP"/></td>
    <td><input type="number" name="attr_Knowledge1Misc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_Knowledge2Trained"/></td>
    <td>Knowledge <input type="text" name="attr_Knowledge2Name"/></td>
    <td>No</td>
    <td>Int<input type="hidden" name="attr_KeyInt"/></td>
    <td><button class="button"
                title="Knowledge2"
                type="roll"
                value="&{template:custom}{{title=Knowledge: @{Knowledge2Name}}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{Knowledge2Total}]]}}"
                name="roll_Knowledge2-check"></button></td>
    <td><input type="number" readonly name="attr_Knowledge2Total"/></td>
    <td><input type="number" readonly name="attr_intmod"/></td>
    <td><input type="number" name="attr_Knowledge2SP"/></td>
    <td><input type="number" name="attr_Knowledge2Misc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_Knowledge3Trained"/></td>
    <td>Knowledge <input type="text" name="attr_Knowledge3Name"/></td>
    <td>No</td>
    <td>Int<input type="hidden" name="attr_KeyInt"/></td>
    <td><button class="button"
                title="Knowledge3"
                type="roll"
                value="&{template:custom}{{title=Knowledge: @{Knowledge3Name}}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{Knowledge3Total}]]}}"
                name="roll_Knowledge3-check"></button></td>
    <td><input type="number" readonly name="attr_Knowledge3Total"/></td>
    <td><input type="number" readonly name="attr_intmod"/></td>
    <td><input type="number" name="attr_Knowledge3SP"/></td>
    <td><input type="number" name="attr_Knowledge3Misc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_Knowledge4Trained"/></td>
    <td>Knowledge <input type="text" name="attr_Knowledge4Name"/></td>
    <td>No</td>
    <td>Int<input type="hidden" name="attr_KeyInt"/></td>
    <td><button class="button"
                title="Knowledge4"
                type="roll"
                value="&{template:custom}{{title=Knowledge: @{Knowledge4Name}}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{Knowledge4Total}]]}}"
                name="roll_Knowledge4-check"></button></td>
    <td><input type="number" readonly name="attr_Knowledge4Total"/></td>
    <td><input type="number" readonly name="attr_intmod"/></td>
    <td><input type="number" name="attr_Knowledge4SP"/></td>
    <td><input type="number" name="attr_Knowledge4Misc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_Knowledge5Trained"/></td>
    <td>Knowledge <input type="text" name="attr_Knowledge5Name"/></td>
    <td>No</td>
    <td>Int<input type="hidden" name="attr_KeyInt"/></td>
    <td><button class="button"
                title="Knowledge5"
                type="roll"
                value="&{template:custom}{{title=Knowledge: @{Knowledge5Name}}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{Knowledge5Total}]]}}"
                name="roll_Knowledge5-check"></button></td>
    <td><input type="number" readonly name="attr_Knowledge5Total"/></td>
    <td><input type="number" readonly name="attr_intmod"/></td>
    <td><input type="number" name="attr_Knowledge5SP"/></td>
    <td><input type="number" name="attr_Knowledge5Misc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_Knowledge6Trained"/></td>
    <td>Knowledge <input type="text" name="attr_Knowledge6Name"/></td>
    <td>No</td>
    <td>Int<input type="hidden" name="attr_KeyInt"/></td>
    <td><button class="button"
                title="Knowledge6"
                type="roll"
                value="&{template:custom}{{title=Knowledge: @{Knowledge6Name}}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{Knowledge6Total}]]}}"
                name="roll_Knowledge6-check"></button></td>
    <td><input type="number" readonly name="attr_Knowledge6Total"/></td>
    <td><input type="number" readonly name="attr_intmod"/></td>
    <td><input type="number" name="attr_Knowledge6SP"/></td>
    <td><input type="number" name="attr_Knowledge6Misc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_ListenTrained"/></td>
    <td>Listen</td>
    <td>Yes</td>
    <td>Wis<input type="hidden" name="attr_KeyWis"/></td>
    <td><button class="button"
                title="Listen"
                type="roll"
                value="&{template:custom}{{title=Listen}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{ListenTotal}]]}}"
                name="roll_Listen-check"></button></td>
    <td><input type="number" readonly name="attr_ListenTotal"/></td>
    <td><input type="number" readonly name="attr_wismod"/></td>
    <td><input type="number" name="attr_ListenSP"/></td>
    <td><input type="number" name="attr_ListenMisc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_LockpickingTrained"/></td>
    <td>Lockpicking</td>
    <td>No</td>
    <td>Dex<input type="hidden" name="attr_KeyDex"/></td>
    <td><button class="button"
                title="Lockpicking"
                type="roll"
                value="&{template:custom}{{title=Lockpicking}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{LockpickingTotal}]]}}"
                name="roll_Lockpicking-check"></button></td>
    <td><input type="number" readonly name="attr_LockpickingTotal"/></td>
    <td><input type="number" readonly name="attr_dexmod"/></td>
    <td><input type="number" name="attr_LockpickingSP"/></td>
    <td><input type="number" name="attr_LockpickingMisc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_MoveSilentlyTrained"/></td>
    <td>Move Silently*</td>
    <td>Yes</td>
    <td>Dex<input type="hidden" name="attr_KeyDex"/></td>
    <td><button class="button"
                title="MoveSilently"
                type="roll"
                value="&{template:custom}{{title=MoveSilently}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{MoveSilentlyTotal}]]}}"
                name="roll_MoveSilently-check"></button></td>
    <td><input type="number" readonly name="attr_MoveSilentlyTotal"/></td>
    <td><input type="number" readonly name="attr_dexmod"/></td>
    <td><input type="number" name="attr_MoveSilentlySP"/></td>
    <td><input type="number" name="attr_MoveSilentlyMisc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_Perform1Trained"/></td>
    <td>Perform <input type="text" name="attr_Perform1Name"/></td>
    <td>No</td>
    <td>Cha<input type="hidden" name="attr_KeyCha"/></td>
    <td><button class="button"
                title="Perform1"
                type="roll"
                value="&{template:custom}{{title=Perform: @{Perform1Name}}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{Perform1Total}]]}}"
                name="roll_Perform1-check"></button></td>
    <td><input type="number" readonly name="attr_Perform1Total"/></td>
    <td><input type="number" readonly name="attr_chamod"/></td>
    <td><input type="number" name="attr_Perform1SP"/></td>
    <td><input type="number" name="attr_Perform1Misc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_Perform2Trained"/></td>
    <td>Perform <input type="text" name="attr_Perform2Name"/></td>
    <td>No</td>
    <td>Cha<input type="hidden" name="attr_KeyCha"/></td>
    <td><button class="button"
                title="Perform2"
                type="roll"
                value="&{template:custom}{{title=Perform: @{Perform2Name}}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{Perform2Total}]]}}"
                name="roll_Perform2-check"></button></td>
    <td><input type="number" readonly name="attr_Perform2Total"/></td>
    <td><input type="number" readonly name="attr_chamod"/></td>
    <td><input type="number" name="attr_Perform2SP"/></td>
    <td><input type="number" name="attr_Perform2Misc"/></td>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_Perform3Trained"/></td>
    <td>Perform <input type="text" name="attr_Perform3Name"/></td>
    <td>No</td>
    <td>Cha<input type="hidden" name="attr_KeyCha"/></td>
    <td><button class="button"
                title="Perform3"
                type="roll"
                value="&{template:custom}{{title=Perform: @{Perform3Name}}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{Perform3Total}]]}}"
                name="roll_Perform3-check"></button></td>
    <td><input type="number" readonly name="attr_Perform3Total"/></td>
    <td><input type="number" readonly name="attr_chamod"/></td>
    <td><input type="number" name="attr_Perform3SP"/></td>
    <td><input type="number" name="attr_Perform3Misc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_Profession1Trained"/></td>
    <td>Profession <input type="text" name="attr_Profession1Name"/></td>
    <td>No</td>
    <td>Int<input type="hidden" name="attr_KeyInt"/></td>
    <td><button class="button"
                title="Profession1"
                type="roll"
                value="&{template:custom}{{title=Profession: @{Profession1Name}}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{Profession1Total}]]}}"
                name="roll_Profession1-check"></button></td>
    <td><input type="number" readonly name="attr_Profession1Total"/></td>
    <td><input type="number" readonly name="attr_intmod"/></td>
    <td><input type="number" name="attr_Profession1SP"/></td>
    <td><input type="number" name="attr_Profession1Misc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_Profession2Trained"/></td>
    <td>Profession <input type="text" name="attr_Profession2Name"/></td>
    <td>No</td>
    <td>Int<input type="hidden" name="attr_KeyInt"/></td>
    <td><button class="button"
                title="Profession2"
                type="roll"
                value="&{template:custom}{{title=Profession: @{Profession2Name}}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{Profession2Total}]]}}"
                name="roll_Profession2-check"></button></td>
    <td><input type="number" readonly name="attr_Profession2Total"/></td>
    <td><input type="number" readonly name="attr_intmod"/></td>
    <td><input type="number" name="attr_Profession2SP"/></td>
    <td><input type="number" name="attr_Profession2Misc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_RideTrained"/></td>
    <td>Ride*</td>
    <td>Yes</td>
    <td>Dex<input type="hidden" name="attr_KeyDex"/></td>
    <td><button class="button"
                title="Ride"
                type="roll"
                value="&{template:custom}{{title=Ride}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{RideTotal}]]}}"
                name="roll_Ride-check"></button></td>
    <td><input type="number" readonly name="attr_RideTotal"/></td>
    <td><input type="number" readonly name="attr_dexmod"/></td>
    <td><input type="number" name="attr_RideSP"/></td>
    <td><input type="number" name="attr_RideMisc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_SleightOfHandTrained"/></td>
    <td>Sleight Of Hand</td>
    <td>Yes</td>
    <td>Dex<input type="hidden" name="attr_KeyDex"/></td>
    <td><button class="button"
                title="SleightOfHand"
                type="roll"
                value="&{template:custom}{{title=SleightOfHand}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{SleightOfHandTotal}]]}}"
                name="roll_SleightOfHand-check"></button></td>
    <td><input type="number" readonly name="attr_SleightOfHandTotal"/></td>
    <td><input type="number" readonly name="attr_dexmod"/></td>
    <td><input type="number" name="attr_SleightOfHandSP"/></td>
    <td><input type="number" name="attr_SleightOfHandMisc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_SpotTrained"/></td>
    <td>Spot</td>
    <td>Yes</td>
    <td>Wis<input type="hidden" name="attr_KeyWis"/></td>
    <td><button class="button"
                title="Spot"
                type="roll"
                value="&{template:custom}{{title=Spot}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{SpotTotal}]]}}"
                name="roll_Spot-check"></button></td>
    <td><input type="number" readonly name="attr_SpotTotal"/></td>
    <td><input type="number" readonly name="attr_wismod"/></td>
    <td><input type="number" name="attr_SpotSP"/></td>
    <td><input type="number" name="attr_SpotMisc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_SabotageDeviceTrained"/></td>
    <td>SabotageDevice</td>
    <td>No</td>
    <td>Int<input type="hidden" name="attr_KeyInt"/></td>
    <td><button class="button"
                title="SabotageDevice"
                type="roll"
                value="&{template:custom}{{title=SabotageDevice}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{SabotageDeviceTotal}]]}}"
                name="roll_SabotageDevice-check"></button></td>
    <td><input type="number" readonly name="attr_SabotageDeviceTotal"/></td>
    <td><input type="number" readonly name="attr_intmod"/></td>
    <td><input type="number" name="attr_SabotageDeviceSP"/></td>
    <td><input type="number" name="attr_SabotageDeviceMisc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_SwimTrained"/></td>
    <td>Swim*</td>
    <td>Yes</td>
    <td>Str<input type="hidden" name="attr_KeyStr"/></td>
    <td><button class="button"
                title="Swim"
                type="roll"
                value="&{template:custom}{{title=Swim}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{SwimTotal}]]}}"
                name="roll_Swim-check"></button></td>
    <td><input type="number" readonly name="attr_SwimTotal"/></td>
    <td><input type="number" readonly name="attr_strmod"/></td>
    <td><input type="number" name="attr_SwimSP"/></td>
    <td><input type="number" name="attr_SwimMisc"/></td>
   </tr>
   <tr class="hoverskill">
    <td><input type="checkbox" name="attr_UseRopeTrained"/></td>
    <td>Use Rope</td>
    <td>Yes</td>
    <td>Dex<input type="hidden" name="attr_KeyDex"/></td>
    <td><button class="button"
                title="UseRope"
                type="roll"
                value="&{template:custom}{{title=UseRope}}{{subtitle=@{charname}}}{{Result:= [[1d20+@{UseRopeTotal}]]}}"
                name="roll_UseRope-check"></button></td>
    <td><input type="number" readonly name="attr_UseRopeTotal"/></td>
    <td><input type="number" readonly name="attr_intmod"/></td>
    <td><input type="number" name="attr_UseRopeSP"/></td>
    <td><input type="number" name="attr_UseRopeMisc"/></td>
   </tr>
  </table>
 </div>
</div>
<!--</editor-fold>-->
<!--<editor-fold desc="Gear-Tab">-->
<div class="sheet-gear">
 <div class="Armor-Off-Hand">
  <table>
   <tr>
    <th colspan="6">Armor and Off-Hand</th>
   </tr>
   <tr style="border: 0">
    <td>Armor</td>
    <td>Shatter Resistance</td>
    <td>Item HP</td>
    <td>Armor Bonus</td>
    <td>Max Dex</td>
    <td>Skill Penalty</td>
   </tr>
   <tr>
    <td><input style="width:140px" type="text"/></td>
    <td><input type="number"/></td>
    <td><input type="number"/></td>
    <td><input type="number" name="attr_ArmorBonus"/></td>
    <td><input type="number" name="attr_DexACLimit"/></td>
    <td><input type="number" name="attr_CheckPen"/></td>
   </tr>
   <tr style="border: 0">
    <td>Shield</td>
    <td>Shatter Resistance</td>
    <td>Item HP</td>
    <td>Shield Bonus</td>
    <td>Max Dex</td>
    <td>Skill Penalty</td>
   </tr>
   <tr>
    <td><input style="width:140px" type="text"/></td>
    <td><input type="number"/></td>
    <td><input type="number"/></td>
    <td><input type="number" name="attr_Shield"/></td>
    <td><input type="number" name="attr_ShieldDexACLimit"/></td>
    <td><input type="number" name="attr_ShieldCheckPen"/></td>
   </tr>
   <tr style="border: 0">
    <td>Focus</td>
    <td>Shatter Resistance</td>
    <td>Item HP</td>
    <td>Enhancement</td>
    <td colspan="2">Notes</td>
   </tr>
   <tr>
    <td><input style="width:140px" type="text"/></td>
    <td><input type="number"/></td>
    <td><input type="number"/></td>
    <td><input type="number" name="attr_FocusEnch"/></td>
    <td colspan="2"><input style="width: 180px" type="text"/></td>
   </tr>
  </table>
 </div>
</div>
<!--</editor-fold>-->
<!--
This is Definitions and traits
-->
<div class="sheet-definitions">
 <div class="clearfix">
  <table class="DnT">
   <tr>
    <th colspan="6">Progression Info</th>
   </tr>
   <tr>
    <th>Attack Curve</th>
    <th>Magic Type</th>
    <th>Specialty</th>
    <th>Natural Int Mod</th>
    <th>Base Skill Growth</th>
    <th>Skills Known</th>
   </tr>
   <tr>
    <td>
     <select type="text" name="attr_AttackCurve" list="AttackOptions">
      <option value="High">High</option>
      <option value="Medium">Medium</option>
      <option value="Low">Low</option>
     </select>
    </td>
    <td>
     <select type="text" name="attr_MagicCurve" list="MagicOptions">
      <option value="None">None</option>
      <option value="Basic">Basic</option>
      <option value="Standard">Standard</option>
      <option value="Advanced">Advanced</option>
     </select>
    </td>
    <td>
     <select type="text" name="attr_Specialty" list="SpecialtyOptions">
      <option value="Combatant">Combatant</option>
      <option value="Generalist">Generalist</option>
      <option value="Specialist">Specialist</option>
     </select>
    </td>
    <td>
     <input type="number" name="attr_NatIntMod" readonly="true"/>
    </td>
    <td>
     <input type="number" name="attr_BaseSkillGrowth"/>
    </td>
    <td>
     <input type="number" name="attr_SkillsKnown" readonly="true"/>
    </td>
   </tr>
  </table>
 </div>
</div>
<!--
type="text/worker"
-->
<script>

<!--<script type="text/worker">-->
var skill_cap_calc = function(hitdie, trained){
    if(trained === "0"){
        return Math.floor((hitdie + 3)/2);
    }
    return hitdie + 3;
}
//<editor-fold desc="Skill Fuster Cluck">
on("change:acrobaticssp change:acrobaticsmisc change:strmod change:checkpen change:shieldcheckpen sheet:opened",function(){
    getAttrs(["AcrobaticsSP","AcrobaticsMisc","strmod","HD","AcrobaticsTrained","CheckPen","ShieldCheckPen"],function(values){
       let SP = parseFloat(values.AcrobaticsSP)||0;
       let misc = parseFloat(values.AcrobaticsMisc)||0;
       let key = parseFloat(values.strmod)||0;
       let HD = parseFloat(values.HD)||0;
       let CheckPen = parseFloat(values.CheckPen)||0;
       CheckPen = CheckPen + (parseFloat(values.ShieldCheckPen)||0);
       setAttrs({
           AcrobaticsTotal: Math.min(skill_cap_calc(HD,values.AcrobaticsTrained),SP) + key + misc - CheckPen,
           AcrobaticsSP: Math.min(skill_cap_calc(HD,values.AcrobaticsTrained),SP)
       });
    });
});

on("change:balancesp change:balancemisc change:dexmod sheet:opened",function(){
    getAttrs(["BalanceSP","BalanceMisc","dexmod","HD","BalanceTrained"],function(values){
        let SP = parseFloat(values.BalanceSP)||0;
        let misc = parseFloat(values.BalanceMisc)||0;
        let key = parseFloat(values.dexmod)||0;
        let HD = parseFloat(values.HD)||0;
        setAttrs({
            BalanceTotal: Math.min(skill_cap_calc(HD,values.BalanceTrained),SP) + key + misc,
            BalanceSP: Math.min(skill_cap_calc(HD,values.BalanceTrained),SP)
        });
    });
});

on("change:beguilesp change:beguilemisc change:chamod sheet:opened",function(){
    getAttrs(["BeguileSP","BeguileMisc","chamod","HD","BeguileTrained"],function(values){
        let SP = parseFloat(values.BeguileSP)||0;
        let misc = parseFloat(values.BeguileMisc)||0;
        let key = parseFloat(values.chamod)||0;
        let HD = parseFloat(values.HD)||0;
        setAttrs({
            BeguileTotal: Math.min(skill_cap_calc(HD,values.BeguileTrained),SP) + key + misc,
            BeguileSP: Math.min(skill_cap_calc(HD,values.BeguileTrained),SP)
        });
    });
});

on("change:bushcraftSP change:bushcraftmisc change:wismod sheet:opened",function(){
    getAttrs(["BushcraftSP","BushcraftMisc","wismod","HD","BushcraftTrained"],function(values){
        let SP = parseFloat(values.BushcraftSP)||0;
        let misc = parseFloat(values.BushcraftMisc)||0;
        let key = parseFloat(values.wismod)||0;
        let HD = parseFloat(values.HD)||0;
        setAttrs({
            BushcraftTotal: Math.min(skill_cap_calc(HD,values.BushcraftTrained),SP) + key + misc,
            BushcraftSP: Math.min(skill_cap_calc(HD,values.BushcraftTrained),SP)
        });
    });
});

on("change:concealsp change:concealmisc change:dexmod sheet:opened",function(){
    getAttrs(["ConcealSP","ConcealMisc","dexmod","HD","ConcealTrained"],function(values){
        let SP = parseFloat(values.ConcealSP)||0;
        let misc = parseFloat(values.ConcealMisc)||0;
        let key = parseFloat(values.dexmod)||0;
        let HD = parseFloat(values.HD)||0;
        setAttrs({
            ConcealTotal: Math.min(skill_cap_calc(HD,values.ConcealTrained),SP) + key + misc,
            ConcealSP: Math.min(skill_cap_calc(HD,values.ConcealTrained),SP)
        });
    });
});

on("change:concentrationsp change:concentrationmisc change:conmod sheet:opened",function(){
    getAttrs(["ConcentrationSP","ConcentrationMisc","conmod","HD","ConcentrationTrained"],function(values){
        let SP = parseFloat(values.ConcentrationSP)||0;
        let misc = parseFloat(values.ConcentrationMisc)||0;
        let key = parseFloat(values.conmod)||0;
        let HD = parseFloat(values.HD)||0;
        setAttrs({
            ConcentrationTotal: Math.min(skill_cap_calc(HD,values.ConcentrationTrained),SP) + key + misc,
            ConcentrationSP: Math.min(skill_cap_calc(HD,values.ConcentrationTrained),SP)
        });
    });
});

on("change:counterfeitsp change:counterfeitmisc change:intmod sheet:opened",function(){
    getAttrs(["CounterfeitSP","CounterfeitMisc","intmod","HD","CounterfeitTrained"],function(values){
        let SP = parseFloat(values.CounterfeitSP)||0;
        let misc = parseFloat(values.CounterfeitMisc)||0;
        let key = parseFloat(values.intmod)||0;
        let HD = parseFloat(values.HD)||0;
        setAttrs({
            CounterfeitTotal: Math.min(skill_cap_calc(HD,values.CounterfeitTrained),SP) + key + misc,
            CounterfeitSP: Math.min(skill_cap_calc(HD,values.CounterfeitTrained),SP)
        });
    });
});

on("change:craft1sp change:craft1misc change:intmod sheet:opened",function(){
    getAttrs(["Craft1SP","Craft1Misc","intmod","HD","Craft1Trained"],function(values){
        let SP = parseFloat(values.Craft1SP)||0;
        let misc = parseFloat(values.Craft1Misc)||0;
        let key = parseFloat(values.intmod)||0;
        let HD = parseFloat(values.HD)||0;
        setAttrs({
            Craft1Total: Math.min(skill_cap_calc(HD,values.Craft1Trained),SP) + key + misc,
            Craft1SP: Math.min(skill_cap_calc(HD,values.Craft1Trained),SP)
        });
    });
});

on("change:craft2sp change:craft2misc change:intmod sheet:opened",function(){
    getAttrs(["Craft2SP","Craft2Misc","intmod","HD","Craft2Trained"],function(values){
        let SP = parseFloat(values.Craft2SP)||0;
        let misc = parseFloat(values.Craft2Misc)||0;
        let key = parseFloat(values.intmod)||0;
        let HD = parseFloat(values.HD)||0;
        setAttrs({
            Craft2Total: Math.min(skill_cap_calc(HD,values.Craft2Trained),SP) + key + misc,
            Craft2SP: Math.min(skill_cap_calc(HD,values.Craft2Trained),SP)
        });
    });
});

on("change:craft3sp change:craft3misc change:intmod sheet:opened",function(){
    getAttrs(["Craft3SP","Craft3Misc","intmod","HD","Craft3Trained"],function(values){
        let SP = parseFloat(values.Craft3SP)||0;
        let misc = parseFloat(values.Craft3Misc)||0;
        let key = parseFloat(values.intmod)||0;
        let HD = parseFloat(values.HD)||0;
        setAttrs({
            Craft3Total: Math.min(skill_cap_calc(HD,values.Craft3Trained),SP) + key + misc,
            Craft3SP: Math.min(skill_cap_calc(HD,values.Craft3Trained),SP)
        });
    });
});

on("change:discernintentsp change:discernintentmisc change:wismod sheet:opened",function(){
    getAttrs(["DiscernIntentSP","DiscernIntentMisc","wismod","HD","DiscernIntentTrained"],function(values){
        let SP = parseFloat(values.DiscernIntentSP)||0;
        let misc = parseFloat(values.DiscernIntentMisc)||0;
        let key = parseFloat(values.wismod)||0;
        let HD = parseFloat(values.HD)||0;
        setAttrs({
            DiscernIntentTotal: Math.min(skill_cap_calc(HD,values.DiscernTrained),SP) + key + misc,
            DiscernIntentSP: Math.min(skill_cap_calc(HD,values.DiscernTrained),SP)
        });
    });
});

on("change:diplomacysp change:diplomacymisc change:chamod sheet:opened",function(){
    getAttrs(["DiplomacySP","DiplomacyMisc","chamod","HD","DiplomacyTrained"],function(values){
        let SP = parseFloat(values.DiplomacySP)||0;
        let misc = parseFloat(values.DiplomacyMisc)||0;
        let key = parseFloat(values.chamod)||0;
        let HD = parseFloat(values.HD)||0;
        setAttrs({
            DiplomacyTotal: Math.min(skill_cap_calc(HD,values.DiplomacyTrained),SP) + key + misc,
            DiplomacySP: Math.min(skill_cap_calc(HD,values.DiplomacyTrained),SP)
        });
    });
});

on("change:disguisesp change:disguisemisc change:chamod sheet:opened",function(){
    getAttrs(["DisguiseSP","DisguiseMisc","chamod","HD","DisguiseTrained"],function(values){
        let SP = parseFloat(values.DisguiseSP)||0;
        let misc = parseFloat(values.DisguiseMisc)||0;
        let key = parseFloat(values.chamod)||0;
        let HD = parseFloat(values.HD)||0;
        setAttrs({
            DisguiseTotal: Math.min(skill_cap_calc(HD,values.DisguiseTrained),SP) + key + misc,
            DisguiseSP: Math.min(skill_cap_calc(HD,values.DisguiseTrained),SP)
        });
    });
});

on("change:escapeartistsp change:escapeartistmisc change:dexmod sheet:opened",function(){
    getAttrs(["EscapeArtistSP","EscapeArtistMisc","dexmod","HD","EscapeArtistTrained"],function(values){
        let SP = parseFloat(values.EscapeArtistSP)||0;
        let misc = parseFloat(values.EscapeArtistMisc)||0;
        let key = parseFloat(values.dexmod)||0;
        let HD = parseFloat(values.HD)||0;
        setAttrs({
            EscapeArtistTotal: Math.min(skill_cap_calc(HD,values.EscapeArtistTrained),SP) + key + misc,
            EscapeArtistSP: Math.min(skill_cap_calc(HD,values.EscapeArtistTrained),SP)
        });
    });
});

on("change:gatherinformationsp change:gatherinformationmisc change:chamod sheet:opened",function(){
    getAttrs(["GatherInformationSP","GatherInformationMisc","chamod","HD","GatherInformationTrained"],function(values){
        let SP = parseFloat(values.GatherInformationSP)||0;
        let misc = parseFloat(values.GatherInformationMisc)||0;
        let key = parseFloat(values.chamod)||0;
        let HD = parseFloat(values.HD)||0;
        setAttrs({
            GatherInformationTotal: Math.min(skill_cap_calc(HD,values.GatherInformationTrained),SP) + key + misc,
            GatherInformationSP: Math.min(skill_cap_calc(HD,values.GatherInformationTrained),SP)
        });
    });
});

on("change:hagglesp change:hagglemisc change:chamod sheet:opened",function(){
    getAttrs(["HaggleSP","HaggleMisc","chamod","HD","HaggleTrained"],function(values){
        let SP = parseFloat(values.HaggleSP)||0;
        let misc = parseFloat(values.HaggleMisc)||0;
        let key = parseFloat(values.chamod)||0;
        let HD = parseFloat(values.HD)||0;
        setAttrs({
            HaggleTotal: Math.min(skill_cap_calc(HD,values.HaggleTrained),SP) + key + misc,
            HaggleSP: Math.min(skill_cap_calc(HD,values.HaggleTrained),SP)
        });
    });
});

on("change:healsp change:healmisc change:wismod sheet:opened",function(){
    getAttrs(["HealSP","HealMisc","wismod","HD","HealTrained"],function(values){
        let SP = parseFloat(values.HealSP)||0;
        let misc = parseFloat(values.HealMisc)||0;
        let key = parseFloat(values.wismod)||0;
        let HD = parseFloat(values.HD)||0;
        setAttrs({
            HealTotal: Math.min(skill_cap_calc(HD,values.HealTrained),SP) + key + misc,
            HealSP: Math.min(skill_cap_calc(HD,values.HealTrained),SP)
        });
    });
});

on("change:intimidatesp change:intimidatemisc change:chamod sheet:opened",function(){
    getAttrs(["IntimidateSP","IntimidateMisc","chamod","HD","IntimidateTrained"],function(values){
        let SP = parseFloat(values.IntimidateSP)||0;
        let misc = parseFloat(values.IntimidateMisc)||0;
        let key = parseFloat(values.chamod)||0;
        let HD = parseFloat(values.HD)||0;
        setAttrs({
            IntimidateTotal: Math.min(skill_cap_calc(HD,values.IntimidateTrained),SP) + key + misc,
            IntimidateSP: Math.min(skill_cap_calc(HD,values.IntimidateTrained),SP)
        });
    });
});

on("change:investigatesp change:investigatemisc change:intmod sheet:opened",function(){
    getAttrs(["InvestigateSP","InvestigateMisc","intmod","HD","InvestigateTrained"],function(values){
        let SP = parseFloat(values.InvestigateSP)||0;
        let misc = parseFloat(values.InvestigateMisc)||0;
        let key = parseFloat(values.intmod)||0;
        let HD = parseFloat(values.HD)||0;
        setAttrs({
            InvestigateTotal: Math.min(skill_cap_calc(HD,values.InvestigateTrained),SP) + key + misc,
            InvestigateSP: Math.min(skill_cap_calc(HD,values.InvestigateTrained),SP)
        });
    });
});

on("change:knowledge1sp change:knowledge1misc change:intmod sheet:opened",function(){
    getAttrs(["Knowledge1SP","Knowledge1Misc","intmod","HD","Knowledge1Trained"],function(values){
        let SP = parseFloat(values.Knowledge1SP)||0;
        let misc = parseFloat(values.Knowledge1Misc)||0;
        let key = parseFloat(values.intmod)||0;
        let HD = parseFloat(values.HD)||0;
        setAttrs({
            Knowledge1Total: Math.min(skill_cap_calc(HD,values.Knowledge1Trained),SP) + key + misc,
            Knowledge1SP: Math.min(skill_cap_calc(HD,values.Knowledge1Trained),SP)
        });
    });
});

on("change:knowledge2sp change:knowledge2misc change:intmod sheet:opened",function(){
    getAttrs(["Knowledge2SP","Knowledge2Misc","intmod","HD","Knowledge2Trained"],function(values){
        let SP = parseFloat(values.Knowledge2SP)||0;
        let misc = parseFloat(values.Knowledge2Misc)||0;
        let key = parseFloat(values.intmod)||0;
        let HD = parseFloat(values.HD)||0;
        setAttrs({
            Knowledge2Total: Math.min(skill_cap_calc(HD,values.Knowledge2Trained),SP) + key + misc,
            Knowledge2SP: Math.min(skill_cap_calc(HD,values.Knowledge2Trained),SP)
        });
    });
});

on("change:knowledge3sp change:knowledge3misc change:intmod sheet:opened",function(){
    getAttrs(["Knowledge3SP","Knowledge3Misc","intmod","HD","Knowledge3Trained"],function(values){
        let SP = parseFloat(values.Knowledge3SP)||0;
        let misc = parseFloat(values.Knowledge3Misc)||0;
        let key = parseFloat(values.intmod)||0;
        let HD = parseFloat(values.HD)||0;
        setAttrs({
            Knowledge3Total: Math.min(skill_cap_calc(HD,values.Knowledge3Trained),SP) + key + misc,
            Knowledge3SP: Math.min(skill_cap_calc(HD,values.Knowledge3Trained),SP)
        });
    });
});

on("change:knowledge4sp change:knowledge4misc change:intmod sheet:opened",function(){
    getAttrs(["Knowledge4SP","Knowledge4Misc","intmod","HD","Knowledge4Trained"],function(values){
        let SP = parseFloat(values.Knowledge4SP)||0;
        let misc = parseFloat(values.Knowledge4Misc)||0;
        let key = parseFloat(values.intmod)||0;
        let HD = parseFloat(values.HD)||0;
        setAttrs({
            Knowledge4Total: Math.min(skill_cap_calc(HD,values.Knowledge4Trained),SP) + key + misc,
            Knowledge4SP: Math.min(skill_cap_calc(HD,values.Knowledge4Trained),SP)
        });
    });
});

on("change:knowledge5sp change:knowledge5misc change:intmod sheet:opened",function(){
    getAttrs(["Knowledge5SP","Knowledge5Misc","intmod","HD","Knowledge5Trained"],function(values){
        let SP = parseFloat(values.Knowledge5SP)||0;
        let misc = parseFloat(values.Knowledge5Misc)||0;
        let key = parseFloat(values.intmod)||0;
        let HD = parseFloat(values.HD)||0;
        setAttrs({
            Knowledge5Total: Math.min(skill_cap_calc(HD,values.Knowledge5Trained),SP) + key + misc,
            Knowledge5SP: Math.min(skill_cap_calc(HD,values.Knowledge5Trained),SP)
        });
    });
});

on("change:knowledge6sp change:knowledge6misc change:intmod sheet:opened",function(){
    getAttrs(["Knowledge6SP","Knowledge6Misc","intmod","HD","Knowledge6Trained"],function(values){
        let SP = parseFloat(values.Knowledge6SP)||0;
        let misc = parseFloat(values.Knowledge6Misc)||0;
        let key = parseFloat(values.intmod)||0;
        let HD = parseFloat(values.HD)||0;
        setAttrs({
            Knowledge6Total: Math.min(skill_cap_calc(HD,values.Knowledge6Trained),SP) + key + misc,
            Knowledge6SP: Math.min(skill_cap_calc(HD,values.Knowledge6Trained),SP)
        });
    });
});

on("change:listensp change:listenmisc change:wismod sheet:opened",function(){
    getAttrs(["ListenSP","ListenMisc","wismod","HD","ListenTrained"],function(values){
        let SP = parseFloat(values.ListenSP)||0;
        let misc = parseFloat(values.ListenMisc)||0;
        let key = parseFloat(values.wismod)||0;
        let HD = parseFloat(values.HD)||0;
        setAttrs({
            ListenTotal: Math.min(skill_cap_calc(HD,values.ListenTrained),SP) + key + misc,
            ListenSP: Math.min(skill_cap_calc(HD,values.ListenTrained),SP)
        });
    });
});

on("change:lockpickingsp change:lockpickingmisc change:dexmod sheet:opened",function(){
    getAttrs(["LockpickingSP","LockpickingMisc","dexmod","HD","LockpickingTrained"],function(values){
        let SP = parseFloat(values.LockpickingSP)||0;
        let misc = parseFloat(values.LockpickingMisc)||0;
        let key = parseFloat(values.dexmod)||0;
        let HD = parseFloat(values.HD)||0;
        setAttrs({
            LockpickingTotal: Math.min(skill_cap_calc(HD,values.LockpickingTrained),SP) + key + misc,
            LockpickingSP: Math.min(skill_cap_calc(HD,values.LockpickingTrained),SP)
        });
    });
});

on("change:movesilentlysp change:movesilentlysmisc change:dexmod change:checkpen change:shieldcheckpen sheet:opened",function(){
    getAttrs(["MoveSilentlySP","MoveSilentlyMisc","dexmod","HD","AcrobaticsTrained","CheckPen","ShieldCheckPen"],function(values){
        let SP = parseFloat(values.MoveSilentlySP)||0;
        let misc = parseFloat(values.MoveSilentlyMisc)||0;
        let key = parseFloat(values.dexmod)||0;
        let HD = parseFloat(values.HD)||0;
        let CheckPen = parseFloat(values.CheckPen)||0;
        CheckPen = CheckPen + (parseFloat(values.ShieldCheckPen)||0);
        setAttrs({
            MoveSilentlyTotal: Math.min(skill_cap_calc(HD,values.MoveSilentlyTrained),SP) + key + misc - CheckPen,
            MoveSilentlySP: Math.min(skill_cap_calc(HD,values.MoveSilentlyTrained),SP)
        });
    });
});

on("change:perform1sp change:perform1misc change:chamod sheet:opened",function(){
    getAttrs(["Perform1SP","Perform1Misc","chamod","HD","Perform1Trained"],function(values){
        let SP = parseFloat(values.Perform1SP)||0;
        let misc = parseFloat(values.Perform1Misc)||0;
        let key = parseFloat(values.chamod)||0;
        let HD = parseFloat(values.HD)||0;
        setAttrs({
            Perform1Total: Math.min(skill_cap_calc(HD,values.Perform1Trained),SP) + key + misc,
            Perform1SP: Math.min(skill_cap_calc(HD,values.Perform1Trained),SP)
        });
    });
});

on("change:perform2sp change:perform2misc change:chamod sheet:opened",function(){
    getAttrs(["Perform2SP","Perform2Misc","chamod","HD","Perform2Trained"],function(values){
        let SP = parseFloat(values.Perform2SP)||0;
        let misc = parseFloat(values.Perform2Misc)||0;
        let key = parseFloat(values.chamod)||0;
        let HD = parseFloat(values.HD)||0;
        setAttrs({
            Perform2Total: Math.min(skill_cap_calc(HD,values.Perform2Trained),SP) + key + misc,
            Perform2SP: Math.min(skill_cap_calc(HD,values.Perform2Trained),SP)
        });
    });
});

on("change:perform3sp change:perform3misc change:chamod sheet:opened",function(){
    getAttrs(["Perform3SP","Perform3Misc","chamod","HD","Perform3Trained"],function(values){
        let SP = parseFloat(values.Perform3SP)||0;
        let misc = parseFloat(values.Perform3Misc)||0;
        let key = parseFloat(values.chamod)||0;
        let HD = parseFloat(values.HD)||0;
        setAttrs({
            Perform3Total: Math.min(skill_cap_calc(HD,values.Perform3Trained),SP) + key + misc,
            Perform3SP: Math.min(skill_cap_calc(HD,values.Perform3Trained),SP)
        });
    });
});

on("change:profession1sp change:profession1misc change:intmod sheet:opened",function(){
    getAttrs(["Profession1SP","Profession1Misc","intmod","HD","Profession1Trained"],function(values){
        let SP = parseFloat(values.Profession1SP)||0;
        let misc = parseFloat(values.Profession1Misc)||0;
        let key = parseFloat(values.intmod)||0;
        let HD = parseFloat(values.HD)||0;
        setAttrs({
            Profession1Total: Math.min(skill_cap_calc(HD,values.Profession1Trained),SP) + key + misc,
            Profession1SP: Math.min(skill_cap_calc(HD,values.Profession1Trained),SP)
        });
    });
});

on("change:profession2sp change:profession2misc change:intmod sheet:opened",function(){
    getAttrs(["Profession2SP","Profession2Misc","intmod","HD","Profession2Trained"],function(values){
        let SP = parseFloat(values.Profession2SP)||0;
        let misc = parseFloat(values.Profession2Misc)||0;
        let key = parseFloat(values.intmod)||0;
        let HD = parseFloat(values.HD)||0;
        setAttrs({
            Profession2Total: Math.min(skill_cap_calc(HD,values.Profession2Trained),SP) + key + misc,
            Profession2SP: Math.min(skill_cap_calc(HD,values.Profession2Trained),SP)
        });
    });
});

on("change:ridesp change:ridemisc change:dexmod change:checkpen change:shieldcheckpen sheet:opened",function(){
    getAttrs(["RideSP","RideMisc","dexmod","HD","RideTrained","CheckPen","ShieldCheckPen"],function(values){
        let SP = parseFloat(values.RideSP)||0;
        let misc = parseFloat(values.RideMisc)||0;
        let key = parseFloat(values.dexmod)||0;
        let HD = parseFloat(values.HD)||0;
        let CheckPen = parseFloat(values.CheckPen)||0;
        CheckPen = CheckPen + (parseFloat(values.ShieldCheckPen)||0);
        setAttrs({
            RideTotal: Math.min(skill_cap_calc(HD,values.RideTrained),SP) + key + misc - CheckPen,
            RideSP: Math.min(skill_cap_calc(HD,values.RideTrained),SP)
        });
    });
});

on("change:sleightofhandsp change:sleightofhandmisc change:dexmod sheet:opened",function(){
    getAttrs(["SleightOfHandSP","SleightOfHandMisc","dexmod","HD","SleightOfHandTrained"],function(values){
        let SP = parseFloat(values.SleightOfHandSP)||0;
        let misc = parseFloat(values.SleightOfHandMisc)||0;
        let key = parseFloat(values.dexmod)||0;
        let HD = parseFloat(values.HD)||0;
        setAttrs({
            SleightOfHandTotal: Math.min(skill_cap_calc(HD,values.SleightOfHandTrained),SP) + key + misc,
            SleightOfHandSP: Math.min(skill_cap_calc(HD,values.SleightOfHandTrained),SP)
        });
    });
});

on("change:spotsp change:spotmisc change:wismod sheet:opened",function(){
    getAttrs(["SpotSP","SpotMisc","wismod","HD","SpotTrained"],function(values){
        let SP = parseFloat(values.SpotSP)||0;
        let misc = parseFloat(values.SpotMisc)||0;
        let key = parseFloat(values.wismod)||0;
        let HD = parseFloat(values.HD)||0;
        setAttrs({
            SpotTotal: Math.min(skill_cap_calc(HD,values.SpotTrained),SP) + key + misc,
            SpotSP: Math.min(skill_cap_calc(HD,values.SpotTrained),SP)
        });
    });
});

on("change:sabotagedevicesp change:sabotagedevicemisc change:intmod sheet:opened",function(){
    getAttrs(["SabotageDeviceSP","SabotageDeviceMisc","intmod","HD","SabotageDeviceTrained"],function(values){
        let SP = parseFloat(values.SabotageDeviceSP)||0;
        let misc = parseFloat(values.SabotageDeviceMisc)||0;
        let key = parseFloat(values.intmod)||0;
        let HD = parseFloat(values.HD)||0;
        setAttrs({
            SabotageDeviceTotal: Math.min(skill_cap_calc(HD,values.SabotageDeviceTrained),SP) + key + misc,
            SabotageDeviceSP: Math.min(skill_cap_calc(HD,values.SabotageDeviceTrained),SP)
        });
    });
});

on("change:swimsp change:swimmisc change:strmod change:checkpen change:shieldcheckpen sheet:opened",function(){
    getAttrs(["SwimSP","SwimMisc","strmod","HD","SwimTrained","CheckPen","ShieldCheckPen"],function(values){
        let SP = parseFloat(values.SwimSP)||0;
        let misc = parseFloat(values.SwimMisc)||0;
        let key = parseFloat(values.strmod)||0;
        let HD = parseFloat(values.HD)||0;
        let CheckPen = parseFloat(values.CheckPen)||0;
        CheckPen = CheckPen + (parseFloat(values.ShieldCheckPen)||0);
        setAttrs({
            SwimTotal: Math.min(skill_cap_calc(HD,values.SwimTrained),SP) + key + misc - CheckPen,
            SwimSP: Math.min(skill_cap_calc(HD,values.SwimTrained),SP)
        });
    });
});

on("change:useropesp change:useropemisc change:dexmod sheet:opened",function(){
    getAttrs(["UseRopeSP","UseRopeMisc","dexmod","HD","UseRopeTrained"],function(values){
        let SP = parseFloat(values.UseRopeSP)||0;
        let misc = parseFloat(values.UseRopeMisc)||0;
        let key = parseFloat(values.dexmod)||0;
        let HD = parseFloat(values.HD)||0;
        setAttrs({
            UseRopeTotal: Math.min(skill_cap_calc(HD,values.UseRopeTrained),SP) + key + misc,
            UseRopeSP: Math.min(skill_cap_calc(HD,values.UseRopeTrained),SP)
        });
    });
});

//</editor-fold>

//<editor-fold desc="Saves">

on("change:fortbasestr change:conmod change:constitution change:hd sheet:opened",function (){
    getAttrs(["FortBaseStr","HD"],function(values){
       let HD = parseFloat(values.HD);
       let base = 0;
       if(values.FortBaseStr === "Low") {
           base = Math.min(6, Math.floor(HD / 3));
       }if(values.FortBaseStr === "High"){
           base = Math.min(12, Math.floor(2+(HD / 2)));
        }
       setAttrs({
           FortBaseNum: base
       });
    });
});

on("change:refbasestr change:dexmod change:dexterity change:hd sheet:opened",function (){
    getAttrs(["RefBaseStr","HD"],function(values){
        let HD = parseFloat(values.HD);
        let base = 0;
        if(values.RefBaseStr === "Low") {
            base = Math.min(6, Math.floor(HD / 3));
        }if(values.RefBaseStr === "High"){
            base = Math.min(12, Math.floor(2+(HD / 2)));
        }
        setAttrs({
            RefBaseNum: base
        });
    });
});

on("change:wilbasestr change:wismod change:wisdom change:hd sheet:opened",function (){
    getAttrs(["WilBaseStr","HD"],function(values){
        let HD = parseFloat(values.HD);
        let base = 0;
        if(values.WilBaseStr === "Low") {
            base = Math.min(6, Math.floor(HD / 3));
        }if(values.WilBaseStr === "High"){
            base = Math.min(12, Math.floor(2+(HD / 2)));
        }
        setAttrs({
            WilBaseNum: base
        });
    });
});

on("change:fortbasestr change:conmod change:constitution change:hd change:fortbasenum " +
    "change:fortmiscnum change:fortmagic sheet:opened",function (){
   getAttrs(["FortBaseNum","conmod","FortMagic","FortMiscNum"],function(values){
      let base = parseFloat(values.FortBaseNum)||0;
      let stat = parseFloat(values.conmod)||0;
      let magic = parseFloat(values.FortMagic)||0;
      let misc = parseFloat(values.FortMiscNum)||0;
      let total = base + stat + magic + misc;
      setAttrs({
          FortTotal: total
      });
   });
});

on("change:refbasestr change:dexmod change:dexterity change:hd change:refbasenum " +
    "change:refmiscnum change:refmagic sheet:opened",function (){
    getAttrs(["RefBaseNum","dexmod","RefMagic","RefMiscNum"],function(values){
        let base = parseFloat(values.RefBaseNum)||0;
        let stat = parseFloat(values.dexmod)||0;
        let magic = parseFloat(values.RefMagic)||0;
        let misc = parseFloat(values.RefMiscNum)||0;
        let total = base + stat + magic + misc;
        setAttrs({
            RefTotal: total
        });
    });
});

on("change:wilbasestr change:wismod change:wisdom change:hd change:wilbasenum " +
    "change:wilmiscnum change:wilmagic sheet:opened",function (){
    getAttrs(["WilBaseNum","wismod","WilMagic","WilMiscNum"],function(values){
        let base = parseFloat(values.WilBaseNum)||0;
        let stat = parseFloat(values.wismod)||0;
        let magic = parseFloat(values.WilMagic)||0;
        let misc = parseFloat(values.WilMiscNum)||0;
        let total = base + stat + magic + misc;
        setAttrs({
            WilTotal: total
        });
    });
});

//</editor-fold>

// <editor-fold desc="AC">
on("change:shield change:size change:armorbonus change:dexmod change:naturalac change:parryac " +
    "change:miscac change:deflection change:insightac change:dodgeac change:dexaclimit change:shielddexaclimit" +
    " sheet:opened",function(){
    getAttrs(["dexmod","ArmorBonus","NaturalAC","Shield","MiscAC",
        "InsightAC","ParryAC","Deflection","DodgeAC","size","DexACLimit","ShieldDexACLimit"],function(values){
       let dex = parseFloat(values.dexmod)||0;
       let armor = parseFloat(values.ArmorBonus)||0;
       let natural = parseFloat(values.NaturalAC)||0;
       let shield = parseFloat(values.Shield)||0;
       let parry = parseFloat(values.ParryAC)||0;
       let dodge = parseFloat(values.DodgeAC)||0;
       let deflection = parseFloat(values.Deflection)||0;
       let insight = parseFloat(values.InsightAC)||0;
       let misc = parseFloat(values.MiscAC)||0;
       let ArmorLimit = parseFloat(values.DexACLimit)||9999;
       let ShieldLimit = parseFloat(values.ShieldDexACLimit)||9999;
       let DexLimit = Math.min(ArmorLimit,ShieldLimit);
       let size = 0;
       if(values.size === "Sub Tiny"){
           size = 8;
       }if(values.size === "Tiny"){
           size = 4;
        }if(values.size === "Very Small"){
           size = 2;
        }if(values.size === "Small"){
           size = 1;
        }if(values.size === "Medium"){
           size = 0;
        }if(values.size === "Large"){
           size = -1;
        }if(values.size === "Very Large"){
           size = -2;
        }if(values.size === "Gargantuan"){
           size = -4;
        }if(values.size === "Super Gargantuan"){
           size = -8;
        }
       let total = 10 + Math.min(DexLimit,dex) + armor + natural + shield + parry + dodge + deflection + insight + misc + size;
       let flat = 10 + armor + natural + shield + deflection + insight + misc + size;
       let touch = 10 + Math.min(DexLimit,dex) + parry + dodge + deflection + insight + misc + size;
       setAttrs({
           TotalAC: total,
           FlatFAC: flat,
           TouchAC: touch,
       });
    });
});
//</editor-fold>

//<editor-fold desc="Initiative Calculations"
on("change:dexmox change:initbonus sheet:opened", function(){
   getAttrs(["dexmod","InitBonus"],function(values){
      let dex = parseFloat(values.dexmod)||0;
      let InitBonus = parseFloat(values.InitBonus)||0;
      let total = dex + InitBonus
       setAttrs({
           InitTotal: total
       });
   });
});
//</editor-fold>

//<editor-fold desc="Button-Tabs"
const buttonlist = ["main","skills","gear","definitions"];
buttonlist.forEach(button => {
    on(`clicked:${button}`, function() {
        setAttrs({
            sheetTab: button
        });
    });
});
//</editor-fold>

//<editor-fold desc="HP Calculations"

on("change:constitution change:mischp change:rollhp sheet:opened", function(){
   getAttrs(["HD","conmod"],function(values){
   let HD = parseFloat(values.HD)||0;
   let conmod = parseFloat(values.conmod)||0;
   let conhp = HD * conmod
       setAttrs({
           ConHP: conhp
       });
   });
});

on("change:constitution change:mischp change:magiccurve change:rollhp sheet:opened", function(){
    getAttrs(["HD","MagicCurve"],function(values){
        let progHP = 0;
        let HD = parseFloat(values.HD)||0;
        if(values.MagicCurve === "None"){
            progHP = 6;
        }if(values.MagicCurve === "Basic"){
            progHP = 5;
        }if(values.MagicCurve === "Standard"){
            progHP = 4;
        }if(values.MagicCurve === "Advanced"){
            progHP = 3;
        }
        setAttrs({
            ProgHP: progHP * HD
        });
    });
});

on("change:constitution change:conmod change:mischp change:magiccurve change:rollhp sheet:opened", function(){
    getAttrs(["ConHP","ProgHP","MiscHP","RollHP"],function(values){
        let con = parseFloat(values.ConHP)||0;
        let prog = parseFloat(values.ProgHP)||0;
        let misc = parseFloat(values.MiscHP)||0;
        let roll = parseFloat(values.RollHP)||0;
        let total = con + prog + misc + roll;
        if(total === 0){
            total = 1
        }
        setAttrs({
            hp_max: total,
            NLD_max: total,
        });
    });
});

//</editor-fold>

//<editor-fold desc="HD Calculations">

on("change:hd change:lg sheet:opened", function(){
    getAttrs(["HD", "LG"], function(values){
       let HD = parseFloat(values.HD)||0;
       let LG = parseFloat(values.LG)||0;
       let HDE = HD + LG
        setAttrs({
           HDE: HDE
        });
    });
});

//</editor-fold>

//<editor-fold desc="Statblock"
on("change:strength change:strbonus change:strench change:strpen sheet:opened", function() {
    getAttrs(["strength", "StrBonus", "StrEnch", "StrPen"], function(values) {
       let base = parseFloat(values.strength)||0;
       let bonus = parseFloat(values.StrBonus)||0;
       let enhancement = parseFloat(values.StrEnch)||0;
       let penalty = parseFloat(values.StrPen)||0;
       let total = base + bonus + enhancement - penalty;
       let mod = Math.floor((total-10)/2)
       setAttrs({
          StrTotal: total,
          strmod: mod
       });
    });
});
on("change:dexterity change:dexbonus change:dexench change:dexpen sheet:opened", function() {
    getAttrs(["dexterity", "DexBonus", "DexEnch", "DexPen"], function(values) {
        let base = parseFloat(values.dexterity)||0;
        let bonus = parseFloat(values.DexBonus)||0;
        let enhancement = parseFloat(values.DexEnch)||0;
        let penalty = parseFloat(values.DexPen)||0;
        let total = base + bonus + enhancement - penalty;
        let mod = Math.floor((total-10)/2)
        setAttrs({
            DexTotal: total,
            dexmod: mod
        });
    });
});
on("change:constitution change:conbonus change:conench change:conpen sheet:opened", function() {
    getAttrs(["constitution", "ConBonus", "ConEnch", "ConPen"], function(values) {
        let base = parseFloat(values.constitution)||0;
        let bonus = parseFloat(values.ConBonus)||0;
        let enhancement = parseFloat(values.ConEnch)||0;
        let penalty = parseFloat(values.ConPen)||0;
        let total = base + bonus + enhancement - penalty;
        let mod = Math.floor((total-10)/2)
        setAttrs({
            ConTotal: total,
            conmod: mod
        });
    });
});
on("change:wisdom change:wisbonus change:wisench change:wispen sheet:opened", function() {
    getAttrs(["wisdom", "WisBonus", "WisEnch", "WisPen"], function(values) {
        let base = parseFloat(values.wisdom)||0;
        let bonus = parseFloat(values.WisBonus)||0;
        let enhancement = parseFloat(values.WisEnch)||0;
        let penalty = parseFloat(values.WisPen)||0;
        let total = base + bonus + enhancement - penalty;
        let mod = Math.floor((total-10)/2)
        setAttrs({
            WisTotal: total,
            wismod: mod
        });
    });
});
on("change:intelligence change:intbonus change:intench change:intpen sheet:opened", function() {
    getAttrs(["intelligence", "IntBonus", "IntEnch", "IntPen"], function(values) {
        let base = parseFloat(values.intelligence)||0;
        let bonus = parseFloat(values.IntBonus)||0;
        let enhancement = parseFloat(values.IntEnch)||0;
        let penalty = parseFloat(values.IntPen)||0;
        let total = base + bonus + enhancement - penalty;
        let mod = Math.floor((total-10)/2)
        setAttrs({
            IntTotal: total,
            intmod: mod
        });
    });
});
on("change:charisma change:chabonus change:chaench change:chapen sheet:opened", function() {
    getAttrs(["charisma", "ChaBonus", "ChaEnch", "ChaPen"], function(values) {
        let base = parseFloat(values.charisma)||0;
        let bonus = parseFloat(values.ChaBonus)||0;
        let enhancement = parseFloat(values.ChaEnch)||0;
        let penalty = parseFloat(values.ChaPen)||0;
        let total = base + bonus + enhancement - penalty;
        let mod = Math.floor((total-10)/2)
        setAttrs({
            ChaTotal: total,
            chamod: mod
        });
    });
});
//</editor-fold>
</script>